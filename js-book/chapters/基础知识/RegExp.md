# 正则表达式

## 相关文档

- [正则表达式 30 分钟入门教程](https://deerchao.net/tutorials/regex/regex.htm)
- [regex101(在线正则表达式开发)](https://regex101.com/)

## 常用正则校验列表

| name         | 正则                                                                                                                                                                                                                   | more                              |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------- |
| is_name      | `/^[a-zA-Z\u4e00-\u9fa5]+$/`                                                                                                                                                                                           | -                                 |
| is_email     | `/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/`                                                                                                                       | -                                 |
| is_phone     | `(?<=\D)1[34578]\d{9}(?=\D)`                                                                                                                                                                                           | -                                 |
| ^            | `(?<=\D)(1[38]\d{9}|14[57]\d{8}|15[0-35-9]\d{8}|17[678]\d{8})(?=\D)`                                                                                                                                                   | -                                 |
| ^            | `/^1[3|4|5|7|8][0-9]{9}$/`                                                                                                                                                                                             | -                                 |
| is_tel_phone | `/^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$/`                                                                                                                                                                               | -                                 |
| is_captcha   | `/^\d{6}$/`                                                                                                                                                                                                            | 是否是验证码                      |
| is_pwd       | `/^[a-zA-Z0-9!@#$%^&*()-+=~:()><,.'?\"]{6,20}$/`                                                                                                                                                                       | 密码验证(6-20 位数字字母混合密码) |
| is_qq        | `/^[1-9]\d{6,20}$/`                                                                                                                                                                                                    | -                                 |
| is_html      | `/^(?:\s*(<[\w\W]+>)[^>]*)$/`                                                                                                                                                                                          | 是否是 html 字符串                |
| is_date      | `/^(\d{4}-\d{2}-\d{2})\s{1}(\d{2}:\d{2}:\d{2})$/`                                                                                                                                                                      | 验证日期格式                      |
| is_url       | `/^\b(((https?|ftp):\/\/)?[-a-z0-9]+(\.[-a-z0-9]+)*\.(?:com|edu|gov|int|mil|net|org|biz|info|name|museum|asia|coop|aero|[a-z][a-z]|((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]\d)|\d))\b(\/[-a-z0-9_:\@&?=+,.!\/~%\$]*)?)$/i` | 是否是 url                        |

## 创建 RegExp 实例

| 创建方式            | 示例                                                       |
| ------------------- | ---------------------------------------------------------- |
| 字面量方式          | /someRule/flags                                            |
| RegExp 构造函数方式 | new RegExp("somrRule",flags) / new RegExp(/someRule/flags) |

## RegExp 修饰符

| 修饰符 | more                                                                                                                                                                                                                         |
| ------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| g      | 表示全局模式,即模式将被应用于所有字符串,而非在发现第一个匹配时就停止;                                                                                                                                                        |
| i      | 表示不区分大小写模式,即在确定匹配项时忽略模式与字符串的大小写;                                                                                                                                                               |
| m      | 表示多行模式,即在到达一行文本末尾时还会继续查询下一行中是否存在与模式匹配的项.                                                                                                                                               |
| u      | 正确识别码点大于 0xFFFF 的 Unicode 字符                                                                                                                                                                                      |
| y      | 粘连修饰符. y 修饰符的作用与 g 修饰符类似，也是全局匹配，后一次匹配都从上一次匹配成功的下一个位置开始。不同之处在于，g 修饰符只要剩余位置中存在匹配就可，而 y 修饰符确保匹配必须从剩余的第一个位置开始，这也就是“粘连”的涵义 |
| s      | 开启 dotAll 模式，使得.可以匹配任意单个字符                                                                                                                                                                                  |

## RegExp 实例属性

| RegExp 实例属性    | more                                              |
| ------------------ | ------------------------------------------------- |
| pattern.global     | 布尔值,表示是否设置了 g 标志                      |
| pattern.ignoreCase | 布尔值,表示是否设置了 i 标志                      |
| pattern.multiline  | 布尔值,表示是否设置了 m 标志                      |
| pattern.lastIndex  | 整数,表示开始搜索下一个匹配项的字符位置,从 0 算起 |
| pattern.source     | 返回正则表达式的正文                              |
| pattern.sticky     | 布尔值,表示是否设置了 y 修饰符                    |
| pattern.flags      | 返回正则表达式的修饰符                            |
| pattern.dotAll     | 布尔值,表示是否设置了 s 修饰符                    |

## 正则

| 分类             | 符号      | 含义                                                                                             |
| ---------------- | --------- | ------------------------------------------------------------------------------------------------ |
| 位置             | -         | -                                                                                                |
| ~                | ^         | 匹配你要用来查找的字符串的开头                                                                   |
| ~                | \$        | 匹配你要用来查找的字符串的结尾                                                                   |
| ~                | \b        | \b 代表单词的开头或结尾,也就是单词的分界处                                                       |
| ~                | \B        | 匹配不是单词开头或结束的位置                                                                     |
| ~                | (?<=y)x   | 后行断言，x 只有在 y 后面才匹配                                                                  |
| ~                | (?=p)     | 先行断言，要求接下来的字符都与 p 匹配                                                            |
| ~                | (?!p)     | 先行否定断言，要求接下来的字符不与 p 匹配                                                        |
| ~                | `(?<!y)x` | 后行否定断言,x 只有不在 y 后面才匹配                                                             |
| 次数             | -         | -                                                                                                |
| ~                | {n,m}     | 匹配前一项至少 n 次，但不能超过 m 次                                                             |
| ~                | {n,}      | 匹配前一项至少 n 次或更多次                                                                      |
| ~                | {n}       | 匹配前一项 n 次                                                                                  |
| ~                | ?         | 指定?前面的内容匹配 0 次或 1 次                                                                  |
| ~                | +         | 元字符,指定+前面的内容需要至少匹配一次                                                           |
| ~                | \*        | 匹配任意次                                                                                       |
| 字符             | -         | -                                                                                                |
| ~                | \o        | NUL 字符(\u0000)                                                                                 |
| ~                | \t        | 制表符                                                                                           |
| ~                | \n        | 换行符                                                                                           |
| ~                | \v        | 垂直制表符                                                                                       |
| ~                | \f        | 换页符                                                                                           |
| ~                | \r        | 回车符                                                                                           |
| ~                | \xnn      | 由 16 进制数 nn 指定的拉丁字符                                                                   |
| ~                | \uxxxx    | Unicode 模式，用来正确处理大于\uFFFF 的 Unicode 字符。也就是说，会正确处理四个字节的 UTF-16 编码 |
| ~                | \cX       | 控制字符^X                                                                                       |
| ~                | .         | 匹配除换行符以外的任意字符                                                                       |
| ~                | \s        | 匹配任意的空白符,包括空格,制表符,换行符                                                          |
| ~                | \S        | 匹配任意不是空白符的字符                                                                         |
| ~                | \w        | 匹配字母,数字,下划线,汉字等;                                                                     |
| ~                | \W        | 匹配任意不是字母.数字,下划线,汉字的字符                                                          |
| ~                | \d        | 匹配一个数字;                                                                                    |
| ~                | \D        | 匹配任意非数字的字符                                                                             |
| ~                | \e        | escape 字符                                                                                      |
| ~                | \a        | alert 字符                                                                                       |
| ~                | [\b]      | 退格直接量                                                                                       |
| ~                | [...]     | 匹配没有预定义元字符的字符集合                                                                   |
| ~                | [a-z]     | 匹配范围                                                                                         |
| ~                | [^...]    | 匹配除了括号内部内容以外的任意字符                                                               |
| ~                | \p{...}   | 允许正则表达式匹配符合 Unicode 某种属性的所有字符                                                |
| ~                | \P{...}   | \P{…}是\p{…}的反向匹配，即匹配不满足条件的字符                                                   |
| 选择、分组、引用 | \         | 使用`\`可以将不同匹配规则分开,只要满足了其中一个就可以                                           |
| ~                | (...)     | 将单独的项组合成子表达式： /java(script)?/                                                       |
| ~                | (...)     | 在完整的模式中定义子模式: /[a-z]+(\d+)/                                                          |
| ~                | (...)     | 在同一正则表达式的后部引用前面的子表达式： /(['"])[^'"]\*\1/                                     |
| ~                | (?<year>) | 具名组匹配(结合 exec 方法)                                                                       |

---

## RegExp 实例方法

| 方法                    | more                                                         |
| ----------------------- | ------------------------------------------------------------ |
| pattern.exec(str)       | 返回一个数组，包含所有匹配的内容，同时包含 index、input 属性 |
| pattern.test(str)       | 返回是否匹配的布尔值                                         |
| pattern.toString()      | 返回字符串形式的正则表达式                                   |
| pattern.toLocalString() | 返回字符串形式的正则表达式                                   |
| pattern.valueOf()       | -                                                            |

## 字符串正则方法

- str.match

- str.replace

```js
// 字符串模版
function tplEngine(tpl, data) {
  return tpl.replace(/<%([^%>]+)?%>/g, function(s0, s1) {
    return data[s1];
  });
}
```

- str.search
