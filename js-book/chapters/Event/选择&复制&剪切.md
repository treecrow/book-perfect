## 选择、复制、剪切

### 在文本框获得焦点时选择其所有文本
```js
textbox.addEventListener('focus',function(event){
    var target=event.target;
    target.select();
});
```

### 禁止粘贴/复制
```js
//禁止复制事件
someTarget.oncopy = function(){return false;};
//禁止粘贴
someTarget.onpaste = function(){return false;};
```

### 取消选择
```js
(window.getSelection && window.getSelection().removeAllRanges()) || (document.selection && document.selection.empty && document.selection.empty());
```

### 取得选择的文本
```js
function getSelectedText(textbox){ 
  //IE9+
  if(typeof textbox.selectionStart =="number"){
    return textbox.values.substring(textbox.selectionStart,textbox.selectionEnd);
  }else{ //IE8-
    return document.selection.createRange().text;
  }
}
```

### 选择部分文本
```js
function selectText(textbox,startIndex,stopIndex){
    if(textbox.setSelectionRange){
        textbox.setSelectionRange(startIndex,stopIndex);
    }else if(textbox.createTextRange){
        var range=textbox.createTextRange(); //创建一个范围
        range.collapse(true); //将范围折叠到文本框的开始位置
        range.moveStart("character",startIndex);
        range.moveEnd("character",stopIndex-startIndex);
        range.select();
    }
    textbox.focus();//要看到选中效果，需要文本框获得焦点
}
```

### [获取和设置剪切板的文本](http://www.jstips.co/en/copy-to-clipboard/)
```js
var EventUtil={
    //获取剪切板的文本
    getClipboardText:function(event){
        var clipboardData=(event.clipboardData || window.clipboardData);
        return clipboardData.getData("text");
    },
    //设置剪切板的文本
    setClipboardText:function(event,value){
        if(event.clipboardData){
            return event.clipboardData.setData("text/plain",value);
        }else if(window.clipboardData){
            return window.clipboardData.setData("text",value);
        }
    }
};
```

### 设置剪切板的文本
```js
document.querySelector('#input').select();
document.execCommand('copy');
```

### [复制内容加版权声明代码]( http://caibaojian.com/js-copy-with-copyright.html)
```js
$("body").on('copy', function (e) {
  if (typeof window.getSelection == "undefined") return;
  var body = document.getElementsByTagName('body')[0];
  var selection = window.getSelection();
  if (("" + selection).length < 30) return;
  var newdiv = document.createElement('div');
  newdiv.style.position = 'absolute';
  newdiv.style.left = '-99999px';
  body.appendChild(newdiv);
  newdiv.appendChild(selection.getRangeAt(0).cloneContents());
  if (selection.getRangeAt(0).commonAncestorContainer.nodeName == "PRE") {
    newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
  }
  newdiv.innerHTML += "<br /><br />原文: <a href='"
    + document.location.href + "'>"
    + document.location.href + "</a> &copy; caibaojian.com";
  selection.selectAllChildren(newdiv);
  window.setTimeout(function () { body.removeChild(newdiv); }, 200);
});
```
