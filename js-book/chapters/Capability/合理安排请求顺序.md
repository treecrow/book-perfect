# 合理安排请求顺序

## 加载外部样式

```javascript
function loadStyle(url){
    try{
        document.createStyleSheet(url)
    }catch (e){
        var cssLink=document.createElement('link');
        cssLink.rel='stylesheet';
        cssLink.type='text/css';
        cssLink.href=url;
        var head=document.getElementsByTagName('head')[0];
        head.appendChild(cssLink);
    }
}
```

## 图片延迟加载并淡入淡出显示效果

```css
img {  opacity: 1;  transition: opacity 10s;  }
img[data-src] {  opacity: 0;  }
```

```javascript
[].forEach.call(document.querySelectorAll('img[data-src]'),function(img){
    img.setAttribute('src', img.getAttribute('data-src'));
    img.onload = function() {
        img.removeAttribute('data-src');
    };
});
```
