# 任务

> Task

## 字段解释

```json
{
  "args": [
    "xxxx",
    {
      "value": "folder with spaces",
      "quoting": "escape" // 如果要控制引用参数的方式，则参数可以是指定值和引用样式的文字
    }
  ], // 在调用此任务时传递给命令的参数
  "command": "", // 要执行的命令。可以是外部程序或 shell 命令
  "dependsOn": [], // 此任务依赖的其他任务
  "group": {
    "kind": "build", // 任务的执行组
    "isDefault": true // 定义此任务是否为组中的默认任务
  }, // 定义此任务属于的执行组。它支持 "build" 以将其添加到生成组，也支持 "test" 以将其添加到测试组。
  "isBackground": true, // 已执行的任务是否保持活动状态并在后台运行
  "label": "", // 任务的用户界面标签
  "linux": {}, // Linux 特定的命令配置
  "options": {
    "cwd": "" // ...
  }, // 其他命令选项
  "osx": {}, // Mac 特定的命令配置
  "presentation": {
    "echo": true, // 控制是否将执行的命令显示到面板中。默认值为“true”
    "reveal": "always", // 控制运行任务的终端是否显示。可按选项 "revealProblems" 进行替代。默认设置为“始终”。
    "focus": false, // 控制面板是否获取焦点。默认值为“false”。如果设置为“true”，面板也会显示
    "panel": "shared", // 控制是否在任务间共享面板。同一个任务使用相同面板还是每次运行时新创建一个面板。
    "showReuseMessage": true, // 控制是否显示“终端将被任务重用，按任意键关闭”提示.
    "clear": false, // 控制是否在执行任务之前清除终端
    "group": "" // 控制是否使用拆分窗格在特定终端组中执行任务。同一组中的任务（由字符串值指定）将使用拆分终端来代替新的终端面板
  }, // 配置用于显示任务输出和读取输入的面板
  "problemMatcher": "$go", // 要使用的问题匹配程序。可以是字符串或问题匹配程序定义，或字符串和问题匹配程序数组。
  "promptOnClose": false, // 当 VS 代码与运行的任务一起关闭时是否提示用户
  "runOptions": {
    "reevaluateOnRerun": true, // 控制当“重新运行上一个任务”命令执行任务时是否重新评估变量
    "runOn": "" // 指定任务运行的时间
  }, // 任务的运行相关选项
  "type": "shell", // 定义任务是被作为进程运行还是在 shell 中作为命令运行
  "windows": {} // Windows 特定的命令配置
}
```

## 内置的 problemMatcher

> 问题匹配器扫描任务输出文本以查找已知警告或错误字符串，并在编辑器和“问题”面板中内联报告这些内容

| name                   | flag             | more                                                                                                       |
| ---------------------- | ---------------- | ---------------------------------------------------------------------------------------------------------- |
| TypeScript             | \$tsc            | assumes that file names in the output are relative to the opened folder.                                   |
| TypeScript Watch       | \$tsc-watch      | matches problems reported from the tsc compiler when executed in watch mode.                               |
| JSHint                 | \$jshint         | assumes that file names are reported as an absolute path.                                                  |
| JSHint Stylish         | \$jshint-stylish | assumes that file names are reported as an absolute path.                                                  |
| ESLint Compact         | \$eslint-compact | assumes that file names in the output are relative to the opened folder.                                   |
| ESLint Stylish         | \$eslint-stylish | assumes that file names in the output are relative to the opened folder.                                   |
| Go                     | \$go             | matches problems reported from the go compiler. Assumes that file names are relative to the opened folder. |
| CSharp and VB Compiler | \$mscompile      | assumes that file names are reported as an absolute path.                                                  |
| Lessc compiler         | \$lessc          | assumes that file names are reported as absolute path.                                                     |
| Node Sass compiler     | \$node-sass      | assumes that file names are reported as an absolute path.                                                  |

## 变量

| 分类           | 变量                        | more                                                             |
| -------------- | --------------------------- | ---------------------------------------------------------------- |
| 预定义变量     | -                           | -                                                                |
| ~              | \${workspaceFolder}         | the path of the folder opened in VS Code                         |
| ~              | \${workspaceFolderBasename} | the name of the folder opened in VS Code without any slashes (/) |
| ~              | \${file}                    | the current opened file                                          |
| ~              | \${relativeFile}            | the current opened file relative to workspaceFolder              |
| ~              | \${fileBasename}            | the current opened file's basename                               |
| ~              | \${fileBasenameNoExtension} | the current opened file's basename with no file extension        |
| ~              | \${fileDirname}             | the current opened file's dirname                                |
| ~              | \${fileExtname}             | the current opened file's extension                              |
| ~              | \${cwd}                     | the task runner's current working directory on startup           |
| ~              | \${lineNumber}              | the current selected line number in the active file              |
| 环境变量       | -                           | -                                                                |
| ~              | \${env:Name}                | -                                                                |
| 设置和命令变量 | -                           | -                                                                |
| ~              | \${config:Name}             | -                                                                |
| ~              | \${command:CommandID}       | -                                                                |
