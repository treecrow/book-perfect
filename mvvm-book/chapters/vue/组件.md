### 父子组件通信
> 为了让组件能避免耦合从而提高复用性和可维护性，又需要使它们相对隔离

> props down, events up，即父组件通过 props 传递数据给子组件，而子组件通过 event 发消息给父组件

### 非父子组件通讯
> 有时候两个组件可能需要互相通讯，但却不是父子关系。在简单的场景下，你可以使用一个空的 Vue 实例来作为中央事件总线（event bus）
```js
var bus = new Vue()
// 在组件 A 的方法中
bus.$emit('id-selected', 1)

// 在组件 B 的 created 中
bus.$on('id-selected', function (id) {
  // ...
})
```
### 子组件进一步处理props数据
> 使用computed来做.不要直接操作props

### 让组件支持 v-model
- 接受 value prop
- 用新的值发送一个 input 事件
```html
<div id="v-model-example">
  <p>{{ message }}</p>
  <my-input
    label="Message"
    v-model="message"
  ></my-input>
</div>
```
```js
Vue.component('my-input', {
  template: '\
    <div class="form-group">\
      <label v-bind:for="randomId">{{ label }}:</label>\
      <input v-bind:id="randomId" v-bind:value="value" v-on:input="onInput">\
    </div>\
  ',
  props: ['value', 'label'],
  data: function () {
    return {
      randomId: 'input-' + Math.random()
    }
  },
  methods: {
    onInput: function (event) {
      this.$emit('input', event.target.value)
    }
  },
})
new Vue({
  el: '#v-model-example',
  data: {
    message: 'hello'
  }
})
```

### keep-alive
> 如果把切换出去的组件保留在内存中，可以保留它的状态或避免重新渲染。为此可以添加一个 keep-alive 指令参数:
```html
<keep-alive>
  <component :is="currentView">
    <!-- 非活动组件将被缓存 -->
  </component>
</keep-alive>
```

### 子组件引用
```html
<div id="parent">
  <user-profile ref="profile"></user-profile>
</div>
```
```js
var parent = new Vue({ el: '#parent' })
// 访问子组件实例
var child = parent.$refs.profile
```

### 异步组件
> 在大型应用中，我们需要把 app 分成一个个小块，只在真正需要的时候才去加载组件。为了简化这个，Vue 允许把组件定义为一个工厂方法，并异步去解析组件定义。Vue 仅仅会在组件真正需要被渲染的时候才会去触发该工厂方法，然后把结果缓存下来给以后的再渲染
```js
Vue.component('async-example', function (resolve, reject) {
  setTimeout(function () {
    resolve({
      template: '<div>I am async!</div>'
    })
  }, 1000)
})
```
### 内联模板
> 当子组件中存在 inline-template 这个特殊属性的时候，它会使用其内容作为模板，而不会把它当做分发内容。如此模板就变得更灵活了
```html
<my-component inline-template>
  <p>These are compiled as the component's own template.</p>
  <p>Not parent's transclusion content.</p>
</my-component>
```
### 静态组件
> 在 Vue 里面渲染纯净的 HTML 元素是很快的，但有时候你可能需要一个包含了很多静态内容的组件。这种情况下，你可以通过在根元素加上 v-once 指令确保它只被评估了一次然后就被缓存下来了
```js
Vue.component('terms-of-service', {
  template: '\
    <div v-once>\
      <h1>Terms of Service</h1>\
      ... 很多静态内容 ...\
    </div>\
  '
})
```
