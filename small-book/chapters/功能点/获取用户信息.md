# 获取用户信息

## 相关 api

| api                                                                                                             | more                   |
| --------------------------------------------------------------------------------------------------------------- | ---------------------- |
| [wx.getUserInfo()](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserInfo.html) | 获取用户信息           |
| [wx.authorize()](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/authorize/wx.authorize.html)     | 提前向用户发起授权请求 |
| [wx.getSetting()](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/setting/wx.getSetting.html)     | 获取用户的当前设置     |

## 步骤

1. 进个人中心调取 wx.getSetting() 获取用户当前的授权状态
2. userInfo 授权存在：直接请求个人数据
3. userInfo 授权不存在：调取 wx.getUserInfo() 接口获取用户信息，fail 提示用户是否打开设置页面控制对该小程序的授权状态
4. 调取 wx.openSetting() 打开设置界面，引导用户开启授权
