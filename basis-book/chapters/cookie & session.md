# Session & Cookie

## Session

- 由于HTTP协议是无状态的协议，所以服务端需要记录用户的状态时（如根据用户级别禁止开发某些页面），就需要用某种机制来识具体的用户，这个机制就是Session。

- session机制采用的是在服务器端保持状态的方案

- session 与 user 不是一一对应的，通过session可以记录游客用户临时的状态

- session id的值应该是一个既不会重复，又不容易被找到规律以仿造的字符串

### 保存Session的方法

方法     | more
------ | ----------------------
文件（默认） | -
集群     | -
内存     | 数据量小的时候可以用，数据量大大时候不建议用
数据库    | -

## Cookie

- 每次HTTP请求的时候，客户端都会发送相应的Cookie信息到服务端（没有过期才发送吧）

- 如果某个cookie所声明的作用范围大于等于将要请求的资源所在的位置，则把该cookie附在请求资源的HTTP请求头上发送给服务器

- cookie机制采用的是在客户端保持状态的方案

### 用 Cookie 来实现Session跟踪

> 实际上大多数的应用都是用 Cookie 来实现Session跟踪的

- 第一次创建Session的时候，服务端会在HTTP协议中告诉客户端，需要在 Cookie 里面记录一个Session ID，以后每次请求把这个会话ID发送到服务器，我就知道你是谁了

- 如果客户端的浏览器禁用了 Cookie ,通过URL重写技术来进行会话跟踪（每次HTTP交互，URL后面都会被附加上一个诸如 sid=xxxxx 这样的参数，服务端据此来识别用户）

### 用 Cookie 来实现免登录

- 账号信息写在 cookie 里面
- 网站页面的脚本读取 cookie 中的账号信息，自动提用户创建需要输入的信息

### cookie的内容

字段   | more
---- | --------------------------------------------------
名字   | -
值    | -
过期时间 | 若不设置过期时间，则表示这个cookie的生命期为浏览器会话期间，关闭浏览器窗口，cookie就消失
路径和域 | 一起构成cookie的作用范围

## Session & Cookie 区别

-    | Session                           | Cookie
---- | --------------------------------- | ----------------------------------
存放地点 | 服务器                               | 浏览器
安全性  | 安全                                | 可以分析存放在本地的COOKIE并进行COOKIE欺骗
性能   | 会占用服务器内存，当访问增多时，服务器性能消耗大          | 不会占用服务器内存
大小限制 | 无限制                               | 单个cookie不能超过4K，浏览器中 cookie 的数量也有限制
概念   | session 是抽象出来的概念，没有具体的指代，需要自己设计创建 | 具体的东西
