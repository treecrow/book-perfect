# 跨域资源共享 (Cross-origin resource sharing)

## 相关文档

| 文档                                                                 | more |
|--------------------------------------------------------------------|------|
| [跨域资源共享 CORS 详解](http://www.ruanyifeng.com/blog/2016/04/cors.html) | -    |

## 跨域相关 http 报文头

| 报文                               | 含义                                                                                                                                                         |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Access-Control-Allow-Origin      | -                                                                                                                                                          |
| Access-Control-Expose-Headers    | -                                                                                                                                                          |
| Access-Control-Max-Age           | 该字段可选，用来指定本次预检请求的有效期，单位为秒                                                                                                                                  |
| Access-Control-Allow-Credentials | 跨域是否允许发送Cookie                                                                                                                                             |
| Access-Control-Allow-Methods     | 跨域允许的方法                                                                                                                                                    |
| Access-Control-Allow-Headers     | 默认 getResponseHeader() 只能拿到6个基本字段：Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Pragma。如果想拿到其他字段，就必须在Access-Control-Expose-Headers里面指定 |

## 简单请求

> 请求方法为 get 、post、head,HTTP的头信息不超出以下几种字段的请求为简单请求。浏览器简单请求和非简单请求的处理是不一样的

> 对于简单请求，浏览器直接发出CORS请求。具体来说，就是在头信息之中，增加一个Origin字段

| 字段               | more                                                                   |
|------------------|------------------------------------------------------------------------|
| Accept           | -                                                                      |
| Accept-Language  | -                                                                      |
| Content-Language | -                                                                      |
| Last-Event-ID    | -                                                                      |
| Content-Type     | 只限于三个值application/x-www-form-urlencoded、multipart/form-data、text/plain |

## 非简单请求

> 非简单请求是那种对服务器有特殊要求的请求，比如请求方法是PUT或DELETE，或者Content-Type字段的类型是application/json

> 非简单请求的CORS请求，会在正式通信之前，增加一次HTTP查询请求，称为"预检"请求（preflight）

## 与JSONP的比较

> JSONP只支持GET请求，CORS支持所有类型的HTTP请求。JSONP的优势在于支持老式浏览器，以及可以向不支持CORS的网站请求数据。
